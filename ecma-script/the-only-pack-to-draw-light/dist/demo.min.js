(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["theonlypacktodrawlight"] = factory();
	else
		root["theonlypacktodrawlight"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./demo.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./demo.js":
/*!*****************!*\
  !*** ./demo.js ***!
  \*****************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dist_index_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.min.js */ \"./dist/index.min.js\");\n/* harmony import */ var _dist_index_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_dist_index_min_js__WEBPACK_IMPORTED_MODULE_0__);\n\nvar _OPDrawLight$cpu = _dist_index_min_js__WEBPACK_IMPORTED_MODULE_0__[\"OPDrawLight\"].cpu,\n    _OPDrawLight$cpu$SDF = _OPDrawLight$cpu.SDF,\n    Circle = _OPDrawLight$cpu$SDF.Circle,\n    Plane = _OPDrawLight$cpu$SDF.Plane,\n    render = _OPDrawLight$cpu.render;\nvar c = new Circle({\n  emissive: 20,\n  reflectivity: 0,\n  eta: 0\n}, {\n  x: 0.5,\n  y: -0.5\n}, .05);\nvar i = new Circle({\n  emissive: 0,\n  reflectivity: .2,\n  eta: 1.5\n}, {\n  x: 0.5,\n  y: 0.87\n}, 0.2);\nvar j = new Plane({\n  emissive: 0,\n  reflectivity: .2,\n  eta: 1.45\n}, {\n  x: 0.5,\n  y: .5\n}, {\n  x: .0,\n  y: -1.0\n}); // 渲染\n\nrender(document.getElementById('cv'), c.union(i.intersect(j)));\n\n//# sourceURL=webpack://theonlypacktodrawlight/./demo.js?");

/***/ }),

/***/ "./dist/index.min.js":
/*!***************************!*\
  !*** ./dist/index.min.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (( false ? undefined : _typeof(exports)) === 'object' && ( false ? undefined : _typeof(module)) === 'object') module.exports = factory();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else {}\n})(window, function () {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // define __esModule on exports\n\n      /******/\n\n\n      __webpack_require__.r = function (exports) {\n        /******/\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/\n          Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n\n\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n\n      /******/\n      // create a fake namespace object\n\n      /******/\n      // mode & 1: value is a module id, require it\n\n      /******/\n      // mode & 2: merge all properties of value into the ns\n\n      /******/\n      // mode & 4: return value when already ns object\n\n      /******/\n      // mode & 8|1: behave like require\n\n      /******/\n\n\n      __webpack_require__.t = function (value, mode) {\n        /******/\n        if (mode & 1) value = __webpack_require__(value);\n        /******/\n\n        if (mode & 8) return value;\n        /******/\n\n        if (mode & 4 && _typeof(value) === 'object' && value && value.__esModule) return value;\n        /******/\n\n        var ns = Object.create(null);\n        /******/\n\n        __webpack_require__.r(ns);\n        /******/\n\n\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n\n        if (mode & 2 && typeof value != 'string') for (var key in value) {\n          __webpack_require__.d(ns, key, function (key) {\n            return value[key];\n          }.bind(null, key));\n        }\n        /******/\n\n        return ns;\n        /******/\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = \"./index.js\");\n      /******/\n    }(\n    /************************************************************************/\n\n    /******/\n    {\n      /***/\n      \"./index.js\":\n      /*!******************!*\\\n        !*** ./index.js ***!\n        \\******************/\n\n      /*! exports provided: OPDrawLight */\n\n      /***/\n      function indexJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"OPDrawLight\\\", function() { return OPDrawLight; });\\n/* harmony import */ var _src_cpu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/cpu */ \\\"./src/cpu/index.js\\\");\\n/* harmony import */ var _src_gpu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/gpu */ \\\"./src/gpu/index.js\\\");\\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\\n\\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\\n\\n\\n\\nvar OPDrawLight = _objectSpread({}, _src_cpu__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"], _src_gpu__WEBPACK_IMPORTED_MODULE_1__[\\\"default\\\"]);\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./index.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/cpu/index.js\":\n      /*!**************************!*\\\n        !*** ./src/cpu/index.js ***!\n        \\**************************/\n\n      /*! exports provided: default */\n\n      /***/\n      function srcCpuIndexJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/sdf/circle'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/sdf/plane'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/sdf/rect'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/render'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\n\\n\\n\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = ({\\n  cpu: {\\n    SDF: {\\n      Circle: !(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/sdf/circle'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\\n      Plane: !(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/sdf/plane'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\\n      Rect: !(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/sdf/rect'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\\n    },\\n    render: !(function webpackMissingModule() { var e = new Error(\\\"Cannot find module './src/render'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\\n  }\\n});\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/cpu/index.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/gpu/index.js\":\n      /*!**************************!*\\\n        !*** ./src/gpu/index.js ***!\n        \\**************************/\n\n      /*! exports provided: default */\n\n      /***/\n      function srcGpuIndexJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./render */ \\\"./src/gpu/render/index.js\\\");\\n/* harmony import */ var _sdf_rect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sdf/rect */ \\\"./src/gpu/sdf/rect.js\\\");\\n/* harmony import */ var _sdf_circle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sdf/circle */ \\\"./src/gpu/sdf/circle.js\\\");\\n/* harmony import */ var _sdf_plane__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sdf/plane */ \\\"./src/gpu/sdf/plane.js\\\");\\n/**\\n *\\n */\\n\\n\\n\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = ({\\n  gpu: {\\n    SDF: {\\n      Circle: _sdf_circle__WEBPACK_IMPORTED_MODULE_2__[\\\"Circle\\\"],\\n      Plane: _sdf_plane__WEBPACK_IMPORTED_MODULE_3__[\\\"Plane\\\"],\\n      Rect: _sdf_rect__WEBPACK_IMPORTED_MODULE_1__[\\\"Rect\\\"]\\n    },\\n    render: _render__WEBPACK_IMPORTED_MODULE_0__[\\\"render\\\"]\\n  }\\n});\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/gpu/index.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/gpu/render/index.js\":\n      /*!*********************************!*\\\n        !*** ./src/gpu/render/index.js ***!\n        \\*********************************/\n\n      /*! exports provided: render */\n\n      /***/\n      function srcGpuRenderIndexJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"render\\\", function() { return render; });\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module '../util/float2'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\n\\nvar N = 32;\\nvar MAX_STEP = 10;\\nvar MAX_DISTANCE = 4.0;\\nvar EPSILON = 1e-6;\\nvar BIAS = 1e-4;\\n/**\\n * 接纳处理好的图形\\n * @param {*} xy\\n * @param {*} o\\n */\\n\\nfunction adaptSDF(xy, o) {\\n  var queue = o._opQueue;\\n  var ls = o.getLightSource(xy);\\n\\n  if (queue.length === 0) {\\n    return ls;\\n  }\\n\\n  var _iteratorNormalCompletion = true;\\n  var _didIteratorError = false;\\n  var _iteratorError = undefined;\\n\\n  try {\\n    for (var _iterator = queue[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\\n      var cmd = _step.value;\\n      var type = cmd.t,\\n          to = cmd.to;\\n\\n      switch (type) {\\n        case 'u':\\n          ls = ls.union(adaptSDF(xy, to));\\n          break;\\n\\n        case 'i':\\n          ls = ls.intersect(adaptSDF(xy, to));\\n          break;\\n\\n        case 's':\\n          ls = ls.subtract(adaptSDF(xy, to));\\n          break;\\n      }\\n    }\\n  } catch (err) {\\n    _didIteratorError = true;\\n    _iteratorError = err;\\n  } finally {\\n    try {\\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\\n        _iterator.return();\\n      }\\n    } finally {\\n      if (_didIteratorError) {\\n        throw _iteratorError;\\n      }\\n    }\\n  }\\n\\n  return ls;\\n}\\n\\nfunction scene(xy, objs) {\\n  return adaptSDF(xy, objs);\\n} // 说是计算法线\\n\\n\\nfunction gradient(xy, objs) {\\n  return {\\n    x: (scene({\\n      x: (xy.x + EPSILON, xy.y),\\n      y: 0\\n    }, objs).sourceDistance - scene({\\n      x: (xy.x - EPSILON, xy.y),\\n      y: 0\\n    }, objs).sourceDistance) * (0.5 / EPSILON),\\n    y: (scene({\\n      x: (xy.x, xy.y + EPSILON),\\n      y: 0\\n    }, objs).sourceDistance - scene({\\n      x: (xy.x, xy.y - EPSILON),\\n      y: 0\\n    }, objs).sourceDistance) * (0.5 / EPSILON)\\n  };\\n}\\n/**\\n * 折射函数\\n * @param {*} ixy\\n * @param {*} nxy\\n */\\n\\n\\nfunction reflect(ixy, nxy) {\\n  var idotn2 = (ixy.x * nxy.x + ixy.y * nxy.y) * 2.0;\\n  return {\\n    x: ixy.x - idotn2 * nxy.x,\\n    y: ixy.y - idotn2 * nxy.y\\n  };\\n}\\n/**\\n * 折射函数\\n * @param {*} ixy\\n * @param {*} nxy\\n * @param {*} eta\\n */\\n\\n\\nfunction refract(ixy, nxy, eta) {\\n  var idotn = ixy.x * nxy.x + ixy.y * nxy.y;\\n  var k = 1.0 - eta * eta * (1.0 - idotn * idotn);\\n  var a = eta * idotn + Math.sqrt(k);\\n  return {\\n    x: eta * ixy.x - a * nxy.x,\\n    y: eta * ixy.y - a * nxy.y\\n  };\\n}\\n/**\\n * ray tracing\\n * @param {*} o\\n * @param {*} d\\n * @param {*} objs 要渲染的对象\\n * @param {*} depth\\n */\\n\\n\\nfunction trace(o, d, objs, depth) {\\n  var t = .0; // 判断是场景内还是外，间eta注释\\n\\n  var s = scene(o, objs).sourceDistance > .0 ? 1 : -1;\\n\\n  for (var i = 0; i < MAX_STEP && t < MAX_DISTANCE; i++) {\\n    var xy = !(function webpackMissingModule() { var e = new Error(\\\"Cannot find module '../util/float2'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module '../util/float2'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(d, t), o);\\n    var sd = scene(xy, objs);\\n    sd.sourceDistance *= s;\\n\\n    if (sd.sourceDistance < EPSILON) {\\n      // 反射\\n      var sum = sd.emissive;\\n\\n      if (depth < 3) {\\n        var refl = sd.reflectivity;\\n\\n        if (sd.reflectivity > .0 || sd.eta > .0) {\\n          var normal = gradient(xy, objs);\\n          normal = !(function webpackMissingModule() { var e = new Error(\\\"Cannot find module '../util/float2'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(normal, s); // 在内的话，要反转法线\\n          // normal = normalize(normal);\\n\\n          if (sd.eta > .0) {\\n            var etaRange = refract(d, normal, s < .0 ? sd.eta : 1.0 / sd.eta);\\n            sum += (1.0 - refl) * trace(xy - normal * BIAS, etaRange, objs, depth + 1);\\n          }\\n\\n          if (refl > .0) {\\n            var refl2 = reflect(d, normal);\\n            sum += refl * trace(xy + normal * BIAS, refl2, objs, depth + 1);\\n          }\\n        }\\n      }\\n\\n      return sum;\\n    }\\n\\n    t += sd.sourceDistance;\\n  }\\n\\n  return .0;\\n}\\n/**\\n * 采样(x,y)的颜色\\n * jitter sampling.\\n * @param {*} xy x,y像素点\\n * @param {Array} objs 填入一堆SDF对象\\n */\\n\\n\\nfunction sample(xy, objs) {\\n  var sum = .0;\\n\\n  for (var i = 0; i < N; i++) {\\n    var a = Math.PI * 2.0 * (i + Math.random()) / N;\\n    sum += trace(xy, {\\n      x: Math.cos(a),\\n      y: Math.sin(a)\\n    }, objs, 0);\\n  }\\n\\n  return sum / 64.0;\\n}\\n/**\\n * 给一个canvas和SDF对象，画出值\\n * @param {*} cv HTML canvas element\\n * @param {*} objs SDF对象树\\n */\\n\\n\\nfunction render(cv, objs) {\\n  if (!cv) {\\n    throw new Error('canvas element not available.');\\n  }\\n\\n  var context = cv.getContext('2d');\\n\\n  if (!context) {\\n    throw new Error('Canvas not supported on current browser.');\\n  }\\n\\n  var W = cv.width,\\n      H = cv.height;\\n  var imgData = context.createImageData(W, H);\\n\\n  for (var i = 0; i < H; i++) {\\n    for (var j = 0; j < W; j++) {\\n      var idx = i * W + j;\\n      var gray = Math.floor(sample({\\n        x: 1.0 * j / W,\\n        y: 1.0 * i / H\\n      }, objs) * 255.0, 0);\\n      imgData.data[idx * 4] = gray;\\n      imgData.data[idx * 4 + 1] = gray;\\n      imgData.data[idx * 4 + 2] = gray;\\n      imgData.data[idx * 4 + 3] = 255;\\n    }\\n  }\\n\\n  context.putImageData(imgData, 0, 0);\\n}\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/gpu/render/index.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/gpu/sdf/base.js\":\n      /*!*****************************!*\\\n        !*** ./src/gpu/sdf/base.js ***!\n        \\*****************************/\n\n      /*! exports provided: SDF */\n\n      /***/\n      function srcGpuSdfBaseJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"SDF\\\", function() { return SDF; });\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module '../light'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\\n\\n\\n/**\\n * 虚拟物体\\n * 用于跟GPU描述一个物体\\n * @date 9012/02/04\\n * @author antimoron\\n */\\n\\nvar SDF =\\n/*#__PURE__*/\\nfunction () {\\n  /**\\n   * 记录光场用的一些属性\\n   * @param {object} props\\n   */\\n  function SDF(props) {\\n    var _this = this;\\n\\n    _classCallCheck(this, SDF);\\n\\n    _defineProperty(this, \\\"_opQueue\\\", []);\\n\\n    _defineProperty(this, \\\"union\\\", function (o) {\\n      if (!o) {\\n        return;\\n      }\\n\\n      _this._opQueue.push({\\n        t: 'u',\\n        to: o\\n      });\\n\\n      return _this;\\n    });\\n\\n    _defineProperty(this, \\\"intersect\\\", function (o) {\\n      if (!o) {\\n        return;\\n      }\\n\\n      _this._opQueue.push({\\n        t: 'i',\\n        to: o\\n      });\\n\\n      return _this;\\n    });\\n\\n    _defineProperty(this, \\\"subtract\\\", function (o) {\\n      if (!o) {\\n        return;\\n      }\\n\\n      _this._opQueue.push({\\n        t: 's',\\n        to: o\\n      });\\n\\n      return _this;\\n    });\\n\\n    this._props = _objectSpread({}, props);\\n  } // TODO: 环形检测，检测好了记得骂人蠢\\n  // 记录操作构建图形场景\\n  // 传{ t: 'u(nion) | i(ntersect) | s(ubtract)', to: SDF}\\n\\n\\n  _createClass(SDF, [{\\n    key: \\\"gpuDesc\\\",\\n    get: function get() {\\n      return null;\\n    }\\n  }]);\\n\\n  return SDF;\\n}();\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/gpu/sdf/base.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/gpu/sdf/circle.js\":\n      /*!*******************************!*\\\n        !*** ./src/gpu/sdf/circle.js ***!\n        \\*******************************/\n\n      /*! exports provided: Circle */\n\n      /***/\n      function srcGpuSdfCircleJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"Circle\\\", function() { return Circle; });\\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \\\"./src/gpu/sdf/base.js\\\");\\n!(function webpackMissingModule() { var e = new Error(\\\"Cannot find module '../util/float2'\\\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\\nfunction _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\n\\n\\n/**\\n * 虚拟物体\\n * 用于描述一个圆\\n * @date 9012/02/03\\n * @author antimoron\\n */\\n\\nvar Circle =\\n/*#__PURE__*/\\nfunction (_SDF) {\\n  _inherits(Circle, _SDF);\\n\\n  function Circle(props, center, radius) {\\n    var _this;\\n\\n    _classCallCheck(this, Circle);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Circle).call(this, props)); // 6 floats + 1 type\\n    // emissive\\n    // reflectivity\\n    // eta\\n    // center: {x,y}\\n    // radius\\n\\n    _this._center = center;\\n    _this._radius = radius;\\n    _this.getSourceDistance = _this.getSourceDistance.bind(_assertThisInitialized(_assertThisInitialized(_this)));\\n    return _this;\\n  }\\n\\n  _createClass(Circle, [{\\n    key: \\\"gpuDesc\\\",\\n    get: function get() {\\n      var _this$_props = this._props;\\n      _this$_props = _this$_props === void 0 ? {} : _this$_props;\\n      var _this$_props$emissive = _this$_props.emissive,\\n          emissive = _this$_props$emissive === void 0 ? 0 : _this$_props$emissive,\\n          _this$_props$reflecti = _this$_props.reflectivity,\\n          reflectivity = _this$_props$reflecti === void 0 ? 0 : _this$_props$reflecti,\\n          _this$_props$eta = _this$_props.eta,\\n          eta = _this$_props$eta === void 0 ? 0 : _this$_props$eta,\\n          _this$_center = this._center;\\n      _this$_center = _this$_center === void 0 ? {} : _this$_center;\\n      var cx = _this$_center.x,\\n          cy = _this$_center.y,\\n          radius = this._radius;\\n      return new Float32Array([1.0, emissive, reflectivity, eta, cx, cy, radius, 0]);\\n    }\\n  }]);\\n\\n  return Circle;\\n}(_base__WEBPACK_IMPORTED_MODULE_0__[\\\"SDF\\\"]);\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/gpu/sdf/circle.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/gpu/sdf/plane.js\":\n      /*!******************************!*\\\n        !*** ./src/gpu/sdf/plane.js ***!\n        \\******************************/\n\n      /*! exports provided: Plane */\n\n      /***/\n      function srcGpuSdfPlaneJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"Plane\\\", function() { return Plane; });\\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \\\"./src/gpu/sdf/base.js\\\");\\nfunction _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\n\\n/**\\n * 虚拟物体\\n * 用于描述一个平面\\n * @date 9012/02/04\\n * @author antimoron\\n */\\n\\nvar Plane =\\n/*#__PURE__*/\\nfunction (_SDF) {\\n  _inherits(Plane, _SDF);\\n\\n  function Plane(props, pxy, normal) {\\n    var _this;\\n\\n    _classCallCheck(this, Plane);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Plane).call(this, props));\\n    _this._pxy = pxy;\\n    _this._normal = normal;\\n    return _this;\\n  }\\n\\n  _createClass(Plane, [{\\n    key: \\\"gpuDesc\\\",\\n    get: function get() {\\n      var _this$_props = this._props;\\n      _this$_props = _this$_props === void 0 ? {} : _this$_props;\\n      var _this$_props$emissive = _this$_props.emissive,\\n          emissive = _this$_props$emissive === void 0 ? 0 : _this$_props$emissive,\\n          _this$_props$reflecti = _this$_props.reflectivity,\\n          reflectivity = _this$_props$reflecti === void 0 ? 0 : _this$_props$reflecti,\\n          _this$_props$eta = _this$_props.eta,\\n          eta = _this$_props$eta === void 0 ? 0 : _this$_props$eta,\\n          _this$_pxy = this._pxy;\\n      _this$_pxy = _this$_pxy === void 0 ? {} : _this$_pxy;\\n      var px = _this$_pxy.x,\\n          py = _this$_pxy.y,\\n          _this$_normal = this._normal;\\n      _this$_normal = _this$_normal === void 0 ? {} : _this$_normal;\\n      var nx = _this$_normal.x,\\n          ny = _this$_normal.y;\\n      return new Float32Array([2.0, emissive, reflectivity, eta, px, py, nx, ny]);\\n    }\\n  }]);\\n\\n  return Plane;\\n}(_base__WEBPACK_IMPORTED_MODULE_0__[\\\"SDF\\\"]);\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/gpu/sdf/plane.js?\");\n        /***/\n      },\n\n      /***/\n      \"./src/gpu/sdf/rect.js\":\n      /*!*****************************!*\\\n        !*** ./src/gpu/sdf/rect.js ***!\n        \\*****************************/\n\n      /*! exports provided: Rect */\n\n      /***/\n      function srcGpuSdfRectJs(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n\n        eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"Rect\\\", function() { return Rect; });\\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \\\"./src/gpu/sdf/base.js\\\");\\nfunction _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\n\\n/**\\n * 虚拟物体\\n * 用于描述一个矩形\\n * @date 9012/02/03\\n * @author antimoron\\n */\\n\\nvar Rect =\\n/*#__PURE__*/\\nfunction (_SDF) {\\n  _inherits(Rect, _SDF);\\n\\n  function Rect(props, center, theta, s) {\\n    var _this;\\n\\n    _classCallCheck(this, Rect);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Rect).call(this, props));\\n    _this._center = center;\\n    _this._theta = theta;\\n    _this._s = s;\\n    _this.getSourceDistance = _this.getSourceDistance.bind(_assertThisInitialized(_assertThisInitialized(_this)));\\n    return _this;\\n  }\\n\\n  _createClass(Rect, [{\\n    key: \\\"gpuDesc\\\",\\n    get: function get() {\\n      var _this$_props = this._props;\\n      _this$_props = _this$_props === void 0 ? {} : _this$_props;\\n      var _this$_props$emissive = _this$_props.emissive,\\n          emissive = _this$_props$emissive === void 0 ? 0 : _this$_props$emissive,\\n          _this$_props$reflecti = _this$_props.reflectivity,\\n          reflectivity = _this$_props$reflecti === void 0 ? 0 : _this$_props$reflecti,\\n          _this$_props$eta = _this$_props.eta,\\n          eta = _this$_props$eta === void 0 ? 0 : _this$_props$eta,\\n          _this$_center = this._center;\\n      _this$_center = _this$_center === void 0 ? {} : _this$_center;\\n      var cx = _this$_center.x,\\n          cy = _this$_center.y,\\n          _this$_s = this._s,\\n          sx = _this$_s.x,\\n          sy = _this$_s.y,\\n          theta = this._theta;\\n      return new Float32Array([3.0, emissive, reflectivity, eta, cx, cy, sx, sy, theta, 0, 0, 0]);\\n    }\\n  }]);\\n\\n  return Rect;\\n}(_base__WEBPACK_IMPORTED_MODULE_0__[\\\"SDF\\\"]);\\n\\n//# sourceURL=webpack://theonlypacktodrawlight/./src/gpu/sdf/rect.js?\");\n        /***/\n      }\n      /******/\n\n    })\n  );\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://theonlypacktodrawlight/./dist/index.min.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack://theonlypacktodrawlight/(webpack)/buildin/module.js?");

/***/ })

/******/ });
});